# Sprint F4: Quick Start Guide - AI Chat

–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ AI —á–∞—Ç–∞.

## –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. **Backend –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:**
   ```bash
   uv sync --all-extras
   ```

2. **Frontend –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:**
   ```bash
   cd frontend && pnpm install
   ```

3. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
   - PostgreSQL –∑–∞–ø—É—â–µ–Ω (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è SQLite)
   - –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã:
     ```bash
     uv run alembic upgrade head
     ```

4. **.env —Ñ–∞–π–ª –Ω–∞—Å—Ç—Ä–æ–µ–Ω:**
   ```env
   OPENROUTER_API_KEY=your_api_key_here
   MODEL_NAME=anthropic/claude-3-haiku
   DATABASE_URL=postgresql+asyncpg://...
   ```

## –ó–∞–ø—É—Å–∫

### –í–∞—Ä–∏–∞–Ω—Ç 1: Full Stack (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –í –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞
make run-dev-stack
```

–≠—Ç–æ –∑–∞–ø—É—Å—Ç–∏—Ç:
- Backend API –Ω–∞ http://localhost:8001
- Frontend –Ω–∞ http://localhost:3000

### –í–∞—Ä–∏–∞–Ω—Ç 2: –†–∞–∑–¥–µ–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

**Terminal 1 - Backend:**
```bash
make run-stats-api
# –∏–ª–∏
uv run uvicorn src.api_main:app --host 0.0.0.0 --port 8001 --reload
```

**Terminal 2 - Frontend:**
```bash
make frontend-dev
# –∏–ª–∏
cd frontend && pnpm run dev
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ API

–û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8001/docs

–ù–∞–π–¥–∏—Ç–µ endpoint **POST /api/v1/chat/message** –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ:

**Request (Normal Mode):**
```json
{
  "message": "–ü—Ä–∏–≤–µ—Ç! –ö—Ç–æ —Ç—ã?",
  "mode": "normal",
  "session_id": "test-session-123"
}
```

**Request (Admin Mode):**
```json
{
  "message": "–°–∫–æ–ª—å–∫–æ –¥–∏–∞–ª–æ–≥–æ–≤ –±—ã–ª–æ –Ω–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ?",
  "mode": "admin",
  "session_id": "test-session-123"
}
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ UI

1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000
2. –í –ø—Ä–∞–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É —É–≤–∏–¥–∏—Ç–µ **—Å–∏–Ω—é—é floating button** —Å –∏–∫–æ–Ω–∫–æ–π —Å–æ–æ–±—â–µ–Ω–∏—è
3. –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É - –æ—Ç–∫—Ä–æ–µ—Ç—Å—è —á–∞—Ç

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Normal Mode (—Å–∏–Ω–∏–π):**
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —á–∞—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ –æ–±—ã—á–Ω–æ–º —Ä–µ–∂–∏–º–µ
- –ò–∫–æ–Ω–∫–∞: ü§ñ Bot
- –¶–≤–µ—Ç: —Å–∏–Ω–∏–π
- –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: "–ü—Ä–∏–≤–µ—Ç! –†–∞—Å—Å–∫–∞–∂–∏ –æ —Å–µ–±–µ"
- –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –æ—Ç–≤–µ—Ç –æ—Ç LLM-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –æ –µ–≥–æ —Ä–æ–ª–∏

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Admin Mode (–∑–µ–ª–µ–Ω—ã–π):**
- –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É **BarChart3** (—Å–ø—Ä–∞–≤–∞ –æ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∞)
- –†–µ–∂–∏–º –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- –ò–∫–æ–Ω–∫–∞: üìä BarChart3
- –¶–≤–µ—Ç: –∑–µ–ª–µ–Ω—ã–π

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã:
```
1. "–°–∫–æ–ª—å–∫–æ –¥–∏–∞–ª–æ–≥–æ–≤ –±—ã–ª–æ –Ω–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ?"
2. "–ü–æ–∫–∞–∂–∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π"
3. "–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –º–µ—Å—è—Ü"
4. "–î–∏–Ω–∞–º–∏–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∑–∞ –Ω–µ–¥–µ–ª—é"
```

–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: mock-–æ—Ç–≤–µ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ StatCollector

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ Session Persistence

1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —á–∞—Ç–µ
2. –ó–∞–∫—Ä–æ–π—Ç–µ —á–∞—Ç (–∫–Ω–æ–ø–∫–∞ X)
3. –û—Ç–∫—Ä–æ–π—Ç–µ —á–∞—Ç —Å–Ω–æ–≤–∞
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
5. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –ò—Å—Ç–æ—Ä–∏—è —Å–æ—Ö—Ä–∞–Ω–∏–ª–∞—Å—å (—Å–æ–æ–±—â–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ –ë–î)

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏

- –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12)
- –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã–π –≤–∏–¥
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —á–∞—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- Floating button –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤–∏–¥–Ω–∞

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### 1. "Network error: Unable to connect to Chat API"

**–ü—Ä–∏—á–∏–Ω–∞:** Backend API –Ω–µ –∑–∞–ø—É—â–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
```bash
make run-stats-api
```

### 2. "LLM API error"

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–≤–µ—Ä–Ω—ã–π –∏–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–π OPENROUTER_API_KEY

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `.env` —Ñ–∞–π–ª
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ API key –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–ª–∞–Ω—Å –≤ OpenRouter

### 3. "Database connection error"

**–ü—Ä–∏—á–∏–Ω–∞:** –ë–î –Ω–µ –∑–∞–ø—É—â–µ–Ω–∞ –∏–ª–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–µ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ PostgreSQL –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ SQLite
# –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏
uv run alembic upgrade head
```

### 4. Admin mode –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã

**–ü—Ä–∏—á–∏–Ω–∞:** Mock data –Ω–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω

**–†–µ—à–µ–Ω–∏–µ:**
- Admin mode –∏—Å–ø–æ–ª—å–∑—É–µ—Ç MockStatCollector
- –î–∞–Ω–Ω—ã–µ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å backend –Ω–∞ –æ—à–∏–±–∫–∏

## –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è Admin Mode

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–∏–∞–ª–æ–≥–æ–≤:**
```
- "–°–∫–æ–ª—å–∫–æ –¥–∏–∞–ª–æ–≥–æ–≤ –±—ã–ª–æ —Å–µ–≥–æ–¥–Ω—è?"
- "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–∏–∞–ª–æ–≥–æ–≤ –∑–∞ –Ω–µ–¥–µ–ª—é"
- "–í—Å–µ–≥–æ –¥–∏–∞–ª–æ–≥–æ–≤ –∑–∞ –º–µ—Å—è—Ü"
```

**–ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:**
```
- "–ü–æ–∫–∞–∂–∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π"
- "–ö—Ç–æ —Å–∞–º—ã–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏?"
- "–¢–æ–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∑–∞ –Ω–µ–¥–µ–ª—é"
```

**–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
```
- "–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞"
- "–ü–æ–∫–∞–∂–∏ –º–µ—Ç—Ä–∏–∫–∏ –∑–∞ –Ω–µ–¥–µ–ª—é"
- "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ –º–µ—Å—è—Ü"
```

**–î–∏–Ω–∞–º–∏–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:**
```
- "–î–∏–Ω–∞–º–∏–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏"
- "–ì—Ä–∞—Ñ–∏–∫ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∑–∞ –Ω–µ–¥–µ–ª—é"
- "–ö–∞–∫ –∏–∑–º–µ–Ω—è–ª–∞—Å—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å?"
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
TEARepo/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chat_api.py          # Chat API endpoint
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models.py            # Pydantic models
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ dependencies.py      # DI –¥–ª—è chat
‚îÇ   ‚îú‚îÄ‚îÄ chat/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chat_handler.py      # Main handler
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ admin_handler.py     # Admin mode handler
‚îÇ   ‚îú‚îÄ‚îÄ db/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models.py            # ChatSession, ChatMessage
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ repository.py        # ChatRepository
‚îÇ   ‚îî‚îÄ‚îÄ api_main.py              # FastAPI app
‚îú‚îÄ‚îÄ frontend/
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ai-chat.tsx      # Chat component
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ chat-floating-button.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ layout/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ dashboard-layout.tsx
‚îÇ   ‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ use-chat.ts          # Chat hook
‚îÇ   ‚îú‚îÄ‚îÄ types/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ chat.ts              # TypeScript types
‚îÇ   ‚îî‚îÄ‚îÄ lib/
‚îÇ       ‚îî‚îÄ‚îÄ api.ts               # API client
‚îî‚îÄ‚îÄ doc/
    ‚îú‚îÄ‚îÄ sprint-f4-implementation.md
    ‚îî‚îÄ‚îÄ sprint-f4-quickstart.md
```

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞

### Backend –ª–æ–≥–∏

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ API —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
uv run uvicorn src.api_main:app --host 0.0.0.0 --port 8001 --reload --log-level debug
```

–õ–æ–≥–∏ –ø–æ–∫–∞–∂—É—Ç:
- –í—Ö–æ–¥—è—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã
- –û–±—Ä–∞–±–æ—Ç–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π (mode, session_id)
- –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å LLM
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î

### Frontend –ª–æ–≥–∏

–û—Ç–∫—Ä–æ–π—Ç–µ DevTools Console (F12) –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
- Network requests –∫ `/api/v1/chat/message`
- –û—à–∏–±–∫–∏ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏–π
- Session ID generation

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

1. **–ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–∞:**
   - –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `prompts/system_prompt.txt`
   - –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend

2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ admin mode:**
   - –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ `src/chat/admin_handler.py`
   - –î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–µ —Ç–∏–ø—ã –∑–∞–ø—Ä–æ—Å–æ–≤

3. **Sprint F5:**
   - –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ Real StatCollector
   - Real text-to-SQL –¥–ª—è admin mode
   - –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- **API Documentation:** http://localhost:8001/docs
- **ReDoc:** http://localhost:8001/redoc
- **Frontend:** http://localhost:3000
- **Implementation Guide:** [sprint-f4-implementation.md](sprint-f4-implementation.md)
- **Frontend Roadmap:** [frontend-roadmap.md](frontend-roadmap.md)

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ backend –∏ frontend
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ `.env`
4. –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ [sprint-f4-implementation.md](sprint-f4-implementation.md)

---

**–î–∞—Ç–∞:** 2025-10-17  
**–°–ø—Ä–∏–Ω—Ç:** F4 - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ò–ò-—á–∞—Ç–∞  
**–í–µ—Ä—Å–∏—è:** 1.0

